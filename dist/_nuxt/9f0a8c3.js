(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{360:function(e,t,n){"use strict";n.r(t);var o=n(70),r=(n(51),n(17)),c=n(356),l=n(357),m={props:[],components:{"p-image":function(){return n.e(7).then(n.bind(null,361))}},data:function(){return{bottom:!1,loading:!1,photos:[],page:1,config:{},sol:-1,max:1e3,showImageDialog:!1,selectedImage:{},requesting:!1}},computed:{},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getLatestSol();case 2:window.addEventListener("scroll",(function(){e.bottom=e.bottomVisible(),e.bottom&&(e.page++,e.getPhotos())})),e.getPhotos();case 4:case"end":return t.stop()}}),t)})))()},created:function(){},methods:{getLatestSol:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,"https://mars.nasa.gov/rss/api/?feed=raw_images&category=mars2020&feedtype=json&latest=true",t.next=4,e.$axios.$get("https://mars.nasa.gov/rss/api/?feed=raw_images&category=mars2020&feedtype=json&latest=true");case 4:data=t.sent,e.config=data,e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},getPhotos:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.requesting&&0!=e.config.latest_sol){t.next=2;break}return t.abrupt("return");case 2:return e.requesting=!0,e.loading=!0,n="https://mars.nasa.gov/rss/api/?feed=raw_images&category=mars2020&feedtype=json&sol=".concat(e.config.latest_sol,"&page=1"),t.next=7,e.$axios.$get(n);case 7:r=t.sent,e.max=r.num_images,l=[].concat(Object(o.a)(r.images),Object(o.a)(e.photos)),e.photos=Object(c.a)(l,["date_taken_utc"],["desc"]),e.config.latest_sol--,e.loading=!1,e.requesting=!1;case 14:case"end":return t.stop()}}),t)})))()},showImage:function(image){this.selectedImage=image,this.showImageDialog=!0},bottomVisible:function(){var e=window.scrollY,t=document.documentElement.clientHeight,n=document.documentElement.scrollHeight;return t+e>=n||n<t},formatDate:function(e,t){return Object(l.a)(new Date(e),t)}}},d=n(68),v=n(91),f=n.n(v),h=n(350),_=n(324),w=n(315),x=n(351),I=n(309),V=n(358),C=n(352),y=n(125),k=n(109),D=n(353),j=n(321),O=n(354),R=n(355),component=Object(d.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-row",e._l(e.photos,(function(t){return n("v-col",{key:t.imageid,attrs:{cols:"12",xs:"6",md:"4",lg:"3",xl:"3"},on:{click:function(n){return e.showImage(t)}}},[n("v-lazy",{attrs:{options:{threshold:.5},transition:"fade-transition","min-height":"200"}},[n("p-image",{attrs:{photo:t,srcset:t.image_files,camera:t.camera}})],1)],1)})),1),e._v(" "),n("v-dialog",{attrs:{"max-width":"80%",scrollable:""},model:{value:e.showImageDialog,callback:function(t){e.showImageDialog=t},expression:"showImageDialog"}},[e.showImageDialog?n("v-card",[n("v-card-title",[n("span",{staticClass:"caption"},[e._v(e._s(e.selectedImage.camera.instrument))]),e._v(" "),n("v-divider",{staticClass:"mx-3",attrs:{vertical:""}}),e._v(" "),n("span",{staticClass:"caption"},[e._v(e._s(e.formatDate(e.selectedImage.date_taken_utc,"MM/dd/yyyy HH:mma")))]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{icon:"",close:""},on:{click:function(t){e.showImageDialog=!1}}},[n("v-icon",[e._v("mdi-close")])],1)],1),e._v(" "),n("v-card-text",{staticClass:"pb-0"},[n("v-img",{attrs:{src:e.selectedImage.image_files.full_res,"max-height":"98%"}})],1),e._v(" "),n("v-card-actions",{staticClass:"px-5"},[n("span",{staticClass:"caption"},[e._v("\n                    "+e._s(e.selectedImage.caption)+"\n                ")])])],1):e._e()],1),e._v(" "),n("v-dialog",{attrs:{value:e.loading}},[n("div",{staticClass:"text-center"},[e.loading?n("v-progress-circular",{attrs:{indeterminate:"",size:"50",width:"5",color:"blue"}}):e._e()],1)])],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{VBtn:h.a,VCard:_.a,VCardActions:w.a,VCardText:w.b,VCardTitle:w.c,VCol:x.a,VContainer:I.a,VDialog:V.a,VDivider:C.a,VIcon:y.a,VImg:k.a,VLazy:D.a,VProgressCircular:j.a,VRow:O.a,VSpacer:R.a})}}]);